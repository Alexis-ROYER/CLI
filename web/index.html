<html>

<!--
    Copyright (c) 2006-2009, Alexis Royer

    All rights reserved.

    Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

        * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
        * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
        * Neither the name of the CLI library project nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->


<head>
    <title>CLI library - How to quickly develop a command line interface</title>
</head>
<body>
<p align="right"><font size="-2">Last updated on May, 18th 2009</font></p>
    <center><font size="+3"><b>CLI</b></font></center>

<table>
<tr>
<td valign="top">
    <a href="#news">News</a><br/>
    <a href="#presentation">Presentation</a><br/>
    <a href="#howto">How does it work?</a><br/>
    <a href="#use">Possible use</a><br/>
    <a href="#license">License</a><br/>
    <a href="#download">Download</a><br/>
    <a href="#history">History</a><br/>
    <a href="#evolutions">Evolutions</a><br/>
    <a href="#contact">Contact</a>
</td>

<td/>

<td valign="top">

<a name="news"/>
    <h1>News</h1>
    <table>
    <tr><td width="10%"/><td valign="top"><i>May, 18th 2009</i></td><td width="5%"/>
                         <td valign="top">New version 2.3 release</td>
        <td width="10%"/></tr>
    <tr><td width="10%"/><td valign="top"><i>Sep, 21st 2008</i></td><td width="5%"/>
                         <td valign="top">Version 2.2 release</td>
        <td width="10%"/></tr>
    <tr><td width="10%"/><td valign="top"><i>Oct, 31st 2007</i></td><td width="5%"/>
                         <td valign="top">The CLI library is now available for C++ and Java</td>
        <td width="10%"/></tr>
    <tr><td width="10%"/><td valign="top"><i>Sept, 27th 2007</i></td><td width="5%"/>
                         <td valign="top">License modification</td>
        <td width="10%"/></tr>
    <tr><td width="10%"/><td valign="top"><i>Apr, 30th 2007</i></td><td width="5%"/>
                         <td valign="top">1.0 First official release. Lots of C++ improvements</td>
        <td width="10%"/></tr>
    <tr><td width="10%"/><td valign="top"><i>Sept, 27th 2006</i></td><td width="5%"/>
                         <td valign="top">Linux and Windows support</td>
        <td width="10%"/></tr>
    <tr><td width="10%"/><td valign="top"><i>May, 17th 2006</i></td><td width="5%"/>
                         <td valign="top">Very first beta release</td>
        <td width="10%"/></tr>
    </table>

<a name="presentation"/>
    <h1>Presentation</h1>

    <p>
    CLI stands for <i>Command Line Interface</i>.
    It is essentially a library,
    and a set of tools that allow you do such kind of things:
    <center>
    <table>
    <tr><td bgcolor="#ffffcc" align="center"><i>XML resource file</i></td></tr>
    <tr>
    <td bgcolor="#eeeeee" valign="top">
<pre>
&lt;?xml version="1.0"?&gt;
&lt;cli name="<b>Hello</b>" xmlns="http://alexis.royer.free.fr/CLI"&gt;
 &lt;cpp option="include"&gt;<b>#include "hello.h"</b>&lt;/cpp&gt;

 &lt;keyword string="<b>say</b>"&gt;&lt;help lang="en"&gt;<b>Tell Something.</b>&lt;/help&gt;
  &lt;keyword string="<b>hello</b>"&gt;&lt;help lang="en"&gt;<b>Just say hello.</b>&lt;/help&gt;
   &lt;endl&gt;&lt;cpp&gt;<b>sayHello();</b>&lt;/cpp&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
  &lt;keyword string="<b>bye</b>"&gt;&lt;help lang="en"&gt;<b>Say goodbye.</b>&lt;/help&gt;
   &lt;endl&gt;&lt;cpp&gt;<b>sayBye();</b>&lt;/cpp&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>
    </td>
    </tr>
    <tr><td bgcolor="#ffffcc" align="center"><i>CLI execution</i></td></tr>
    <tr>
    <td bgcolor="#eeeeee" valign="top">
        <img src="hello.jpg"/>
    </td>
    </table>
    </center>
    </p>

    <p>
    When the user enters 'say', he/she can then enter either <i>'hello'</i> or <i>'bye'</i>.
    When he/she enters <i>'hello'</i> and presses the return key,
    the CLI library automatically calls the user-defined function <i>'sayHello()'</i>.
    </p>

    <p>
    This 'Hello world' example shows the direct relationship
    between the XML resource file and the CLI execution.
    Here is now a more complete list of the CLI library features:
    <ol>
        <li><b>Edition facilities:</b>
            The user can use left and right arrows, begin and end, delete and backspace keys for command line edition.
        </li>
        <li><b>History:</b>
            The user can use up and down arrows to navigate through the command line history.
        </li>
        <li><b>Completion and help:</b>
            The user has facilities to get into the set of commands.
            The CLI library automatically manages completion,
            and help can be set for every keyword and parameter.
        </li>
        <li><b>Menus:</b>
            User-defined commands can give access to user-defined menus,
            which may contain other sets of user-defined commands,
            and so on...
        </li>
        <li><b>XML resource file:</b>
            All the command lines syntaxes can be described in an XML resource file, natively managing keywords, parameters, tags...
            This XML resource file provides the ability to directly insert the final native calls attached to each command,
            making the link with a global application.
        </li>
        <li><b>Generic input/output:</b>
            Input/output can be easily redirected.
            The CLI library currently gives support for the following regular input/output devices:
            console, telnet connections, files and strings.
            But you may implement your own intput/output device for your special needs.
        </li>
        <li><b>Traces:</b>
            An inner traces management system is available with the library.
        </li>
    </ol>
    </p>

<a name="howto"/>
    <h1>How does it work?</h1>

    <p>
    Considering you already have the user code to execute at end,
    all you have to do is the following:
    <ol>
        <li>Edit an <b>XML resource file</b>;</li>
        <li><b>Transform</b> the XML resource file into target language code;</li>
        <li>Depending on the target language, <b>integrate</b> the result of the transformation.</li>
    </ol>
    </p>

    <p>
    For instance, in C++, the result of the transformation is a C++ source file.
    You should therefore compile it
    and link it with the CLI library and your user-defined program.
    You should also make a call somewhere in your program
    to launch the execution of your CLI.
    In most cases, it should not be too difficult to have it work quickly.
    </p>

    <p>
    In Java, compile the Java source file resulting of the transformation.
    Then use the CLI object defined in it and the CLI library to launch it.
    Just ensure you have the CLI library available from your paths.
    That's it.
    </p>

    <p>
    The transformation step is just an XSLT transformation
    using an XSL stylesheet provided with the library.
    Therefore, the most difficult (and it aims to be easy) is the XML resource file edition.
    Have a look at the <a href="user-guide/cli-user-guide.html">CLI user guide</a> for more information.
    </p>


<a name="use"/>
    <h1>Possible use</h1>

    <p>
    Here is a list of possible interests you could have in this projects:
    <ul>
        <li><b>Text-based user interface:</b>
            The CLI library is essentially a text-based user interface,
            so, obviously, it can be used to define such kind of interfaces.
            We must admit that graphical user interfaces are much more attractive,
            however text-based interfaces have the advantage to easily get a file for input.
            Instructions can be saved and replayed later on.</li>
        <li><b>Monitoring:</b>
            It is sometimes useful to have a secondary user interface,
            for monitoring operations for instance,
            fully dissociated from the primary one.</li>
        <li><b>Configuration files:</b>
            You can easily define a specific configuration file syntax with the CLI library.
            Therefore, you could use it instead of .ini files or XML files.</li>
        <li><b>Automation:</b>
            Since CLI is text-based, it is compatible with automation.
            Automated test tools generally need to interact with tested equipments or softwares.
            The CLI library is an easy way to implement an entry point on target equipments for unit tests.</li>
        <li><b>Simple compilers:</b>
            The CLI library can be used for its command line parsing ability,
            making in that way compilers of simple syntaxes.</li>
        <li><b>Reuse of code:</b>
            Eventually, if the XML CLI definition does not fit your needs,
            but you are interested in what the library does on the other hand,
            you could directly use the C++ objects of the library.
            You shall therefore have a look at
            the <a href="doxygen/html/index.html">doxygen</a>
            or <a href="javadoc/html/index.html">javadoc</a> documentation of the library.</li>
    </ul>
    </p>

    <p>
    If you find any other interest in this library,
    please
    <script type='text/javascript'>
    <!--
        var v2="FDBVQRYZW82SPA2VXBBJVU";
        var v7=unescape("%27%28%27.8%21w%288AW%21%10%26_71.l%2998");
        var v5=v2.length;
        var v1="";
        for(var v4=0;v4<v5;v4++){
            v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));
        }
        document.write(
            '<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'
            + v1
            + '?subject=Email%20Alexis%20Royer'
            + '\'">'
            + 'let me know</a>');
    //-->
    </script><noscript><a href='http://w2.syronex.com/jmr/safemailto/#noscript'>let me know (guarded by anti-spam solution)</a></noscript>.
    </p>


<a name="license"/>
    <h1>License</h1>

    <p>
    This software, written by Alexis Royer,
    has moved to a <a href="LICENSE.txt">BSD-like license</a> since version 2.0.
    </p>

    <p>
    This kind of license is compatible with commercial use, modification and redistribution,
    under the terms of the <a href="LICENSE.txt">license</a>.
    </p>


<a name="download"/>
    <h1>Download</h1>

    <table>

    <tr>
    <td>May, 18th 2009</td>
    <td><a href="cli-2.3.tgz">cli-2.3.tgz</a></td>
    <td>Left and right arrows management.
        Clean screen management.
        Thread-safe termination, and mono-thread execution.
        XSL readability improvement.
        Bug corrections.</td>
    </tr>

    <tr>
    <td>Sep, 21st 2008</td>
    <td><a href="cli-2.2.tgz">cli-2.2.tgz</a></td>
    <td>Bug corrections  &amp; improvements (see <a href="#history">history</a>).</td>
    </tr>

    <tr>
    <td>Oct, 31st 2007</td>
    <td><a href="cli-2.1.tgz">cli-2.1.tgz</a></td>
    <td>Java support and various improvements.</td>
    </tr>

    <tr>
    <td>Sept, 27th 2007</td>
    <td><a href="cppcli-2.0.tgz">cppcli-2.0.tgz</a></td>
    <td>License modification.</td>
    </tr>

    <tr>
    <td>Apr, 30th 2007</td>
    <td><a href="cppcli-1.0.tgz">cppcli-1.0.tgz</a></td>
    <td>Not a beta anymore!
        Improved again, and fully C++ coding now.
        <a href="#history">History section</a> tells more about improvements.</td>
    </tr>

    <tr>
    <td>Sept, 27th 2006</td>
    <td><a href="cppcli-1.0.beta1.tgz">cppcli-1.0.beta1.tgz</a></td>
    <td>This version has been improved a lot, and tested on both Linux and Windows.
        Since things have been cleaned up,
        compatibility is not strictly respected with the previous release,
        but it should not be a big deal.
        Have a look at the <a href="#history">history section</a> for details about improvements.
        However <a href="cppcli-1.0.tgz">cppcli-1.0.tgz</a> is now available.</td>
    </tr>

    <tr>
    <td>May, 17th 2006</td>
    <td><a href="cppcli-1.0.beta1-1.tgz">cppcli-1.0.beta1-1.tgz</a></td>
    <td>Very first release.
        You'd probably better get <a href="cppcli-1.0.tgz">cppcli-1.0.tgz</a>.</td>
    </tr>

    </table>


<a name="history">
    <h1>History</h1>

    <table border="1">

    <tr>
    <th bgcolor="#eeeeee">date</th>
    <th bgcolor="#eeeeee">version</th>
    <th bgcolor="#eeeeee">Description</th>
    </tr>

    <tr>
    <td valign="top" bgcolor="#ffffcc">May, 18th 2009</td>
    <td valign="top" align="center" bgcolor="#ffffcc">2.3</td>
    <td>
        Major modifications:
        <ul>
        <li>Left and right arrows management</li>
        <li>Clean screen function (CTRL+L)</li>
        <li>Integration improvements: thread safe termination management, mono-thread execution</li>
        <li>XSL generation improved for a better readability of the code generated: user-code highlighted, and comments addition indicating the current chain of keywords in analysis</li>
        </ul>
        Miscellaneous:
        <ul>
        <li>Command line history object addition</li>
        <li>Input/output character management improvements, "endl" support modification for Input/Output devices. '\n' are automatically interpreted by devices now</li>
        <li>Input file device improvements: bufferization for optimization, special characters disabling, error location / error prefixing modification</li>
        <li>Consistency improvements regarding devices: OutputDevice::GetActualDevice() method addition</li>
        <li>Java samples projects addition</li>
        </ul>
        Bug corrections:
        <ul>
        <li>Bug(major)! cppclic.xsl correction for SAXON compatibility</li>
        <li>Bug(minor)! Errors due to oversized words in CommandLine are not notified to the user</li>
        <li>Bug(minor)! xsltproc crash when the tag[@ref] is directly located in the tag[@id]</li>
        </ul>
    </td>
    </tr>

    <tr>
    <td valign="top" bgcolor="#ffffcc">Sep, 21st 2008</td>
    <td valign="top" align="center" bgcolor="#ffffcc">2.2</td>
    <td>
        Bug corrections:
        <ul>
        <li>major! IOMux device closure error.</li>
        <li>major! cli::tk::Queue::Iterator [tk_stl.h] definition revision. Incompatible with some compilers.</li>
        <li>major! Java object consistency problems.</li>
        <li>major! XSL generation errors for menus directly generated for an endl node.</li>
        <li>major! Bad cppclic.xsl generation for 2 level menu structures.</li>
        <li>major! Memory leak in Queue::~Queue() [tk_inner.h] -> m_arptQueue was not destroyed.</li>
        <li>major! Consistency errors because of static constant objects in C++ files when compiled with Visual .NET. Singleton used instead.</li>
        <li>major! Bad javaclic.xsl generation for 2 level menu structures. Test addition.</li>
        <li>major! History cannot store more than 100 command lines</li>
        <li>minor! InputFileDevice::GetKey(): unknown characters do not end the file anymore.</li>
        <li>minor! Spelling error: "Uncomplete" changed to "Incomplete" in CommandLine::Parse().</li>
        <li>minor! System includes (#include <>) changed into project includes (#include "").</li>
        <li>minor! When an input file does not exist (cli::InputFileDevice), no error message is printed out.
                     => Addition of a m_cliLastError member in cli::OutputDevice, that can be set by all subclasses.</li>
        <li>minor! TAB when the line is empty does nothing.</li>
        </ul>

        Miscellanous:
        <ul>
        <li>Makefile improvements.</li>
        <li>Special character addition.</li>
        <li>Addition of error prefixing.</li>
        <li>Cli configuration menu disabling</li>
        <li>Java implementation evolutions:
            cli.Element.getCli/getShell(), cli.Traces.set/unsetStream(), cli.IOMux, cli.SingleCommand</li>
        <li>Java documentation.</li>
        <li>Doxygen documentation generated in web directory.</li>
        <li>XSL stylesheet revision:
            special sections, CLI_EXECUTION, cpp corrections, coherence between cpp and java...</li>
        </ul>
    </td>
    </tr>

    <tr>
    <td valign="top" bgcolor="#ffffcc">Oct, 31st 2007</td>
    <td valign="top" align="center" bgcolor="#ffffcc">2.1</td>
    <td>
        Major modifications:
        <ul>
        <li>Java support: lots of improvements still remaining, but it works so far</li>
        <li>French language support</li>
        </ul>
        Miscellanous:
        <ul>
        <li>C++:
            <ul>
            <li>Makefile architecture improvements: help.mak, mkres.mak, check.mak... makefiles creation</li>
            <li>Addition of cli::Object generic object</li>
            <li>C++ No namespace directive enabled</li>
            <li>C++ No-stdlib implementation available</li>
            <li>C++ Pre-compiled headers enabling</li>
            <li>Assertions improvements</li>
            <li>ncurses and Windows consoles modifications</li>
            <li>Traces consistency improvement. Addition of Traces::UnsetStream()</li>
            <li>C++ XSL revisions (inherited from java experience):</li>
                    CLI tree created in the scope of the CLI class;
                    Both static and dynamic CLI instantiation;
                    Generation of CLI_EXECUTION traces</li>
            </ul>
        </li>
        </ul>
    </td>
    </tr>

    <tr>
    <td valign="top" bgcolor="#ffffcc">Sept, 27th 2007</td>
    <td valign="top" align="center" bgcolor="#ffffcc">2.0</td>
    <td>
        Major modifications:
        <ul>
        <li>License modification:
            The former LGPL license has been abandoned for a BSD-like license.
            This is the decision of the author (myself) in order to have fewer constraints
            on using and modifying the library in any kind of softwares (even commercial ones),
            which is what I wanted initially.</li>
        </ul>
        Miscellanous:
        <ul>
        <li>Useless constructor removal in cli/include/param.h</li>
        </ul>
    </td>
    </tr>

    <tr>
    <td valign="top" bgcolor="#ffffcc">Apr, 30th 2007</td>
    <td valign="top" align="center" bgcolor="#ffffcc">1.0</td>
    <td>
        Major modifications:
        <ul>
        <li>cli namespace.</li>
        <li>Input / output devices:
            <ul>
            <li>instance and opening locking / auto-deletion</li>
            <li>new devices: cli::FileDevice, cli::SingleCommand, cli::IOMux</li>
            </ul>
        </li>
        <li>Revision of cpp section naming in XSL.</li>
        </ul>
        Miscellanous:
        <ul>
        <li>include/cli directory creation and file names modification.</li>
        <li>Makefiles improvements:
            <ul>
            <li>build/make directory creation</li>
            <li>target specific generation</li>
            <li>debug generation management</li>
            <li>BIN_SUFFIX addition</li>
            </ul>
        </li>
        <li>Unit tests: empty, io_device.</li>
        <li>Traces system addition.</li>
        </ul>
        Bug corrections:
        <ul>
        <li>No help display on completion so far.</li>
        <li>Bad management of '%' and '|' characters.</li>
        <li>Incorrect behavior on a string parameters filled with "" (completion and execution, as if not set).</li>
        <li>Not possible to have two tags on the same syntax node.</li>
        <li>Crash on CcliOutputDevice::operator&lt;&lt;(const char* const) with NULL for parameter.</li>
        <li>Prompt stream disabled, Echo enabled, TAB -> help display => current line not printed again.</li>
        </ul>
    </td>
    </tr>

    <tr>
    <td valign="top" bgcolor="#ffffcc">Sept, 27th 2006</td>
    <td valign="top" align="center" bgcolor="#ffffcc">1.0.beta1</td>
    <td>
        Major modifications:
        <ul>
        <li>Source documentation.</li>
        <li>Windows / cygwin support (Linux is still available of course).</li>
        <li>Command line history.</li>
        <li>Completion "so far".</li>
        <li>Escape characters and double quotes management.</li>
        <li>Hollow-tags.</li>
        <li>Beep support for IO devices.</li>
        <li>Stream branching modification.</li>
        <li>Welcome and prompt messages modification.</li>
        <li>Echo and beep on/off live configuration.</li>
        </ul>
        Miscellanous:
        <ul>
        <li>Launch method modification.</li>
        <li>CLI retrieval based on regular expressions.</li>
        <li>Automatic test tools.</li>
        <li>C++ constness improvement.</li>
        <li>Cross-platform Makefiles improvement.</li>
        </ul>
        Bug corrections:
        <ul>
        <li>A new line is not printed anymore on unsuccessful tab request.</li>
        <li>The line is not printed anymore when a syntax error occurred.</li>
        <li>User-defined includes generated in the very first place (useful for pre-compiled headers).</li>
        <li>Xml-namespace fixed.</li>
        <li>Elements sorted for help display.</li>
        <li>"Syntax error next to..." not correctly displayed on completion.</li>
        <li>Double definition of CcliElement::FindElements() fixed.</li>
        <li>'?' / TAB, help / completion behaviors improvement.</li>
        </ul>
    </td>
    </tr>

    <tr>
    <td valign="top" bgcolor="#ffffcc">May, 17th 2006</td>
    <td valign="top" align="center" bgcolor="#ffffcc">1.0.beta1-1</td>
    <td>Very first release. I still propose it for download for history purpose only.
        Quite stable, but needs little adaptation to work under Windows for instance.
        Let's say it was ready for demonstration.</td>
    </tr>

    </table>


<a name="evolutions"/>
    <h1>Evolutions</h1>

    <p>
    To my point of view, the major aims of the CLI library have been reached so far, and I'm quite proud of that.
    That's the reason why there are not many modifications expected in the next times.
    But once again, if you feel the need for any other evolution, please     <script type='text/javascript'>
    <!--
        var v2="FDBVQRYZW82SPA2VXBBJVU";
        var v7=unescape("%27%28%27.8%21w%288AW%21%10%26_71.l%2998");
        var v5=v2.length;
        var v1="";
        for(var v4=0;v4<v5;v4++){
            v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));
        }
        document.write(
            '<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'
            + v1
            + '?subject=Email%20Alexis%20Royer'
            + '\'">'
            + 'let me know</a>');
    //-->
    </script><noscript><a href='http://w2.syronex.com/jmr/safemailto/#noscript'>let me know (guarded by anti-spam solution)</a></noscript>.
    </p>

    <p>
    Coming next:
    <ul>
    <li><b>Other target languages:</b>
        Supported languages are C++ and Java at present.
        Next ones could be Perl or python...</li>
    <li>...</li>
    </ul>
    </p>

<a name="contact"/>
    <h1>Contact</h1>

    <p>
    Any question?
    Found a bug?
    Feel free to
    <script type='text/javascript'>
    <!--
        var v2="UI3S4HHZ3YZFPPI5A2PTJT";
        var v7=unescape("4%25V+%5D%3Bf%28%5C%20%3F4%107%24T%28%5E%7E7%259");
        var v5=v2.length;
        var v1="";
        for(var v4=0;v4<v5;v4++){
            v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));
        }
        document.write(
            '<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'
            + v1
            + '?subject=Email%20Alexis%20Royer'
            + '\'">'
            + 'email me</a>');
    //-->
    </script><noscript><a href='http://w2.syronex.com/jmr/safemailto/#noscript'>email me (guarded by anti-spam solution)</a></noscript>.
    </p>
</td>
</tr>
</table>

</body>
</html>

